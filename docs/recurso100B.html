<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Métodos y Simulación Estadística" />


<title> Limpieza de datos</title>

<script src="site_libs/header-attrs-2.23/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"> </a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Conceptos básicos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso101.html">Conceptos Básicos</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="recurso101A.html">Conceptos</a>
    </li>
    <li>
      <a href="recurso100A.html">Importar datos</a>
    </li>
    <li>
      <a href="recurso100B.html">Limpieza de datos</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Análisis de datos
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso102.html">Análisis de datos</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="recurso102A.html">Tablas de frecuencia</a>
    </li>
    <li>
      <a href="recurso102B.html">Indicadores</a>
    </li>
    <li>
      <a href="recurso102C.html">Visualización</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Software R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="recurso103.html">Introducción a R</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="recurso103A.html">Tablas</a>
    </li>
    <li>
      <a href="recurso103B.html">Indicadores</a>
    </li>
    <li>
      <a href="recurso103C.html">Visualización</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore"><span style="color:#034a94">
<strong>Limpieza de datos</strong></span></h1>
<h4 class="author">Métodos y Simulación Estadística</h4>

</div>


<p></br></br></p>
<!-- ======================================================================= -->
<p>Una de las tareas más importante al realizar un proyecto de Ciencia
de Datos corresponde a la preparación de los datos (Limpieza de datos o
data cleaning) que posteriormente va a permitir el modelamiento adecuado
de los datos.</p>
<p>Este ciclo comprende :</p>
<ul>
<li>Importación de los datos</li>
<li>Fusión de datos</li>
<li>Datos faltantes</li>
<li>Estandarización</li>
<li>Normalización</li>
<li>Elinación de registros duplicados</li>
<li>Verificación y enrequecimiento</li>
<li>Exportación de los datos</li>
</ul>
<p></br></br></p>
<p>Al importar una base de datos que está conformada por una matriz con
<span class="math inline">\(n\)</span> filas o registros y <span
class="math inline">\(m\)</span> columnas o variables se presentan
problemas relacionados con:</p>
<ul>
<li>Datos faltantes (NA)</li>
<li>Reemplazar los datos faltantes - imputación</li>
<li>Datos extraños o atípicos</li>
<li>Necesidad de estandarizar los valores con el fin varias variables
sean comparables (una misma escala)</li>
<li>Construir nuevas variables a partir de las contenidas en la
base</li>
<li>Cambiar el formato de una variable</li>
<li>Aumentar los registros contenidos en dos bases</li>
<li>Agregar variables contenidas en dos bases</li>
</ul>
<p></br></br></p>
<p>A contunuación se presentan algunos de estos temas que permiten
tratar y dejar lista la base de datos de interes para iniciar el
análisis de datos</p>
<p></br></br></p>
<div id="datos-faltantes" class="section level2">
<h2><span style="color:#034a94"><strong>Datos faltantes</strong></h2>
<p>El tratamiento de datos faltantes es un aspecto crítico en Ciencia de
Datos, ya que ellos pueden afectar de manera significativa la calidad y
validez de los análisis y modelos que realicemos. Acontinuación se
presentan algunas estrategias comunes para manejar los datos
faltantes:</p>
<p></br></p>
<div id="eliminacion-de-los-registros-o-filas" class="section level3">
<h3><span style="color:#034a94"><strong>1. Eliminacion de los registros
o filas</strong></span></h3>
<p>Si los <strong>datos faltantes</strong> son pocos en comparación con
el tamaño total del conjunto de datos, una estrategia es eliminar los
registros o filas que contienen datos faltantes. Sin embargo, esta
estrategia puede llevar a una pérdida de información si los datos
faltantes son sistemáticos o si se eliminan muchas observaciones en
comparación con el tamaño de la base de datos.</p>
<p></br></p>
</div>
<div id="imputación-de-valores" class="section level3">
<h3><span style="color:#034a94"><strong>2. Imputación de
valores</strong></h3>
<p>La imputación implica estimar y reemplazar los valores faltantes con
valores razonables. Esto se puede realizar de diferentes maneras, como
:</p>
<p></br></p>
</div>
<div id="reemplazar-los-valores-faltantes" class="section level3">
<h3><span style="color:#034a94"><strong>Reemplazar los valores
faltantes</strong></h3>
<p>Se reemplazan los datos faltantes por la media o la mediana en el
caso de variables numéricas o por el valor más frecuente de la variable
correspondiente (moda), en el caso de las variables cualitativas.</p>
<p></br></p>
</div>
<div id="utilizar-técnicas-más-avanzadas" class="section level3">
<h3><span style="color:#034a94"><strong>Utilizar técnicas más
avanzadas</strong></h3>
<p>Los valores faltantes pueden ser reemplazados por valores obtenidos a
a partir modelos, donde se construyen para estimar los valores faltantes
de manera predictiva.</p>
<p></br></p>
</div>
<div id="tratamiento-de-datos-faltantes-como-una-categoría"
class="section level3">
<h3><span style="color:#034a94"><strong>Tratamiento de datos faltantes
como una categoría</strong></h3>
<p>En el caso de variables categóricas o cualitativas sus valores
faltantes se pueden encontrar a partir del modelamiento la subbase con
registros completos</p>
<p>los datos faltantes pueden tener un significado propio y no deben ser
imputados ni eliminados. En lugar de eso, puedes considerar tratar los
datos faltantes como una categoría adicional en el análisis o
modelo.</p>
<p></br></p>
</div>
<div id="técnicas-avanzadas-de-imputación" class="section level3">
<h3><span style="color:#034a94"><strong>Técnicas avanzadas de
imputación</strong></h3>
<p>Existen métodos Aavanzados para imputar datos faltantes, como la
imputación múltiple (multiple imputation) y la imputación basada en
modelos de aprendizaje automático. Estos enfoques generan múltiples
conjuntos de datos imputados y tienen en cuenta la incertidumbre
asociada con la imputación.</p>
<p></br></p>
<p>Es importante evaluar cuidadosamente el patrón y la naturaleza de los
datos faltantes antes de decidir qué estrategia utilizar. Además, es
fundamental tener en cuenta que los método de imputación introduce
incertidumbre y puede afectar los resultados de los análisis o modelos.
Por lo tanto, es recomendable documentar y tener en cuenta el proceso de
imputación en el análisis y la interpretación de los resultados.</p>
<p></br></br></p>
</div>
<div id="ejemplo" class="section level3">
<h3><span style="color:#FF7F00"><strong>Ejemplo</strong></h3>
<p>A partir de la base de datos vivienda_faltantes contenida en
paqueteMET, se plantera examinar una muestra de ella de tamaño 1000 x 13
que se puede obtener con el siguiente código :</p>
<pre class="r"><code>library(paqueteMET)
library(dplyr)
data(&quot;vivienda_faltantes&quot;)
set.seed(123)
datosNA&lt;-sample_n(vivienda_faltantes, 1000)
str(datosNA)</code></pre>
<pre><code>spc_tbl_ [1,000 × 13] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ id       : num [1:1000] 122 190 880 1663 1401 ...
 $ zona     : chr [1:1000] &quot;Zona Norte&quot; &quot;Zona Oriente&quot; &quot;Zona Oriente&quot; &quot;Zona Sur&quot; ...
 $ piso     : num [1:1000] 1 4 1 NA NA 1 7 NA 2 4 ...
 $ estrato  : num [1:1000] 3 3 3 4 4 5 5 3 5 3 ...
 $ preciom  : num [1:1000] 150 360 250 375 150 270 290 235 450 125 ...
 $ areaconst: num [1:1000] 93 420 210 74 57 75 93 122 252 72 ...
 $ parquea  : num [1:1000] NA 1 NA 1 NA 1 1 1 2 NA ...
 $ banios   : num [1:1000] 1 6 4 5 2 2 3 2 2 2 ...
 $ habitac  : num [1:1000] 4 9 4 5 3 3 3 5 7 3 ...
 $ tipo     : chr [1:1000] &quot;Casa&quot; &quot;Casa&quot; &quot;Apartamento&quot; &quot;Casa&quot; ...
 $ barrio   : chr [1:1000] &quot;la rivera&quot; &quot;las ceibas&quot; &quot;morichal de comfandi&quot; &quot;calicanto viii&quot; ...
 $ longitud : num [1:1000] -76.5 -76.5 -76.5 -76517 -76.5 ...
 $ latitud  : num [1:1000] 3.48 3.46 3.4 3373 3.38 ...
 - attr(*, &quot;spec&quot;)=
  .. cols(
  ..   id = col_double(),
  ..   zona = col_character(),
  ..   piso = col_double(),
  ..   estrato = col_double(),
  ..   preciom = col_double(),
  ..   areaconst = col_double(),
  ..   parquea = col_double(),
  ..   banios = col_double(),
  ..   habitac = col_double(),
  ..   tipo = col_character(),
  ..   barrio = col_character(),
  ..   longitud = col_double(),
  ..   latitud = col_double()
  .. )
 - attr(*, &quot;problems&quot;)=&lt;externalptr&gt; </code></pre>
<p><br/></p>
<p>Como se observa con la función <code>str()</code> obtenemos una
visualización del tamaño de la base de datos, las variables que la
conforman y el tipo de variables y una muesrta de los primeros
valores.</p>
<p>Existen diferentes formas de visualizar los datos faltantes</p>
<pre class="r"><code>faltantes &lt;- colSums(is.na(datosNA))
faltantes</code></pre>
<pre><code>       id      zona      piso   estrato   preciom areaconst   parquea    banios 
        0         0       344         0         0         0       208         0 
  habitac      tipo    barrio  longitud   latitud 
        0         0         0         0         0 </code></pre>
<p>Esta función muestra el número total de datos faltantes por
variable</p>
<p><br/></p>
<pre class="r"><code># install.packages(&quot;naniar&quot;)
library(naniar)
gg_miss_var(datosNA)</code></pre>
<p><img src="recurso100B_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>En esta gráfica podemos visualizar que las viables piso y parquea
presentan datos faltantes, la primera al rededor de 340 y la segunda un
poco más de 200 datos faltantes.</p>
<p></br></br></p>
<pre class="r"><code># install.packages(&quot;mice&quot;)
library(mice)
grafico &lt;-md.pattern(datosNA, rotate.names = TRUE)</code></pre>
<p><img src="recurso100B_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>En la gráfica generada por la función <code>md.pattern()</code> del
paquete <code>mice</code> representa la base de datos, se observa que
546 registros tienen informaciçon completa (sin datos faltantes), se
presentan 246 registros con datos faltantes en la variable piso, 110
registros les hace falta información en la variables parqueadero y a 98
registros les hace falta información en dos variables (parqueadero y
piso)</p>
<p></br></br></p>
<p>La función : <code>na.omit()</code> , permite elimitar todos los
registros contenidos en la base de datos que contenga datos faltantes
(NA) c</p>
<pre class="r"><code># install.packages(&quot;mice&quot;)
library(mice)
datosSINA &lt;- na.omit(datosNA)  # elimina todos los valores con  NA
grafico &lt;-md.pattern(datosSINA, rotate.names = TRUE)</code></pre>
<p><img src="img/datosNA1.png" width="60%" style="display: block; margin: auto;" /></p>
<p></br></br></p>
</div>
</div>
<div id="imputación" class="section level1">
<h1><strong>Imputación</strong></h1>
<p>Si no se desea eliminar los registros que contiene datos faltantes,
dado que se puede perder un gran porcentaje de la información, entoces
se recurre a reemplazar estos valores, primero calculado el valor por el
cual se debe reemplazar,</p>
<p>En este primer caso puede se trater de falta de información o que los
propietarios entendieron que no debian responder la pregunta, pues su
vivienda no posee parqueadero. En otros casos es posible que se trate de
un dato faltante real y se deba reeplazar por la media por ejemplo</p>
<p>El caso de reemplazar el NA por <strong>cero</strong> procederemos
así:</p>
<pre class="r"><code>datosNA$parquea[is.na(datosNA$parquea)] &lt;- 0
grafico &lt;-md.pattern(datosNA, rotate.names = TRUE)</code></pre>
<p><img src="recurso100B_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p></br></p>
<p>En el caso de reemplazar el NA por el valor correspondiente a la
media se asigna este valor de la siguiente manera:</p>
<pre class="r"><code># Calcula la media de la variable &quot;parquea&quot;
media_parquea &lt;- mean(datosNA$parquea, na.rm = TRUE)
datosNA$parquea[is.na(datosNA$parquea)] &lt;- media_parquea
grafico &lt;-md.pattern(datosNA, rotate.names = TRUE)</code></pre>
<p><img src="img/datosNA2.png" width="70%" style="display: block; margin: auto;" />
</br></br></p>
<pre class="r"><code># install.packages(&quot;DescTools&quot;)
library(DescTools)
moda_piso &lt;- Mode(datosNA$piso, na.rm = TRUE)
datosNA$piso[is.na(datosNA$piso)] &lt;- moda_piso
grafico &lt;-md.pattern(datosNA, rotate.names = TRUE)</code></pre>
<p><img src="img/datosNA3.png" width="70%" style="display: block; margin: auto;" /></p>
<p><br/></p>
<p>Las otras tecnicas la iremos incorporando en las siguientes
unidades</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
